This is commit query model working end to end